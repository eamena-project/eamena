{% comment %}
ARCHES - a program developed to inventory and manage immovable cultural heritage.
Copyright (C) 2013 J. Paul Getty Trust and World Monuments Fund

FINAL FIX v9: This version fixes the carousel transition to create a smooth
cross-fade effect, removing the black screen that appeared between slides.

This homepage template is designed to showcase the EAMENA Database v5, featuring a carousel of images.
It is redesigned by EAMENA's researcher and database manager Salah Ebrahimipour in June 2025, with the aim of providing
a visually appealing and informative introduction to the EAMENA project.
It includes a responsive navbar, a carousel with image captions and attributions, and a footer with
links to the EAMENA and MarEA projects, as well as information about the supporting organizations
and their licenses.
This template is intended to be used as the landing page for the EAMENA Database v4
and is built using Bootstrap 5 for styling and responsiveness.

{% endcomment %}

{% load static %}
{% load template_tags %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ app_title }}</title>
    
    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #000;
        }
        
        /* Animated Downtime Alert */
        .upgrade-alert {
            background-color: #c82333;
D            color: white;
            font-size: 20px;
            margin-bottom: 0;
            border-radius: 0;
            border: none;
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .upgrade-alert.show {
            /* Animation: Final State (visible) */
            max-height: 150px;
            padding-top: 15px;
            padding-bottom: 15px;
            opacity: 1;
        }
        
        .site-wrapper {
            position: relative;
            height: 100vh;
            min-height: 750px;
            overflow: hidden;
        }
        /* --- Carousel Customization --- */
        .carousel, .carousel-inner, .carousel-item { height: 100%; }
        .carousel-item {
            background-size: cover;
            background-position: center center;
            transition: opacity 0.5s ease;
        }
        
        /* FIX FOR CROSS-FADE: This ensures the outgoing slide doesn't disappear before the new one appears */
        .carousel-fade .active.carousel-item-start,
        .carousel-fade .active.carousel-item-end {
            opacity: 1;
        }

        .carousel-item::before {
            content: '';
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(0, 0, 0, 0.1) 100%);
            z-index: 1;
        }
        
        .carousel-caption {
            text-align: left;
            bottom: 20rem;
            left: 1%;
            right: auto;
            z-index: 2;
            width: fit-content;
            padding: 1.5rem;
            background-color: rgba(26, 6, 50, 0.5);
            border-radius: 35px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .carousel-caption h2 {
            font-weight: 700;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            text-shadow: none;
        }
        .carousel-caption p {
            font-size: clamp(1rem, 2vw, 1.2rem);
            text-shadow: none;
        }
        .image-attribution {
            position: absolute;
            bottom: 1rem;
            left: 1.5rem;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            padding: 0.5rem;
            z-index: 2;
        }

        /* --- NAVBAR STYLING --- */
        .navbar {
            position: absolute;
            top: 0; left: 0; width: 100%;
            z-index: 10;
            padding: 1rem 0;
            background: linear-gradient(to bottom, rgba(26, 6, 50, 0.478), transparent);
        }
        .navbar-brand-logos img {
            max-height: 57px;
            width: auto;
            margin-right: 1.5rem;
            vertical-align: middle;
        }
        
        .navbar-nav-right {
            background-color: rgba(26, 6, 50, 0.75);
            backdrop-filter: blur(8px);
            font-size: larger;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0 0 35px 35px;
            padding: 0.75rem 1.5rem;
            text-align: right;
            margin-top: -1.2rem;
        }
        .navbar-nav-right a {
            color: #fff !important;
            font-size: 0.8rem;
            font-weight: 500;
            text-decoration: none;
            padding: 0.2rem 0.4rem;
        }
        .navbar-nav-right a:hover {color: #0af129 !important; font-weight: 500;}
}
        .navbar-nav-right .nav-top-tier { margin-bottom: 0.5rem; margin-right: 0.4rem;}
        .navbar-nav-right .nav-bottom-tier a { margin-left: 0.2rem; margin-right: 0.2rem;}
        
        .navbar-toggler { border: 1px solid rgba(255, 255, 255, 0.5); }
        .navbar-toggler-icon { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"); }
        .offcanvas { background-color: rgba(26, 6, 50, 0.870); color: #ecf0f1;}
        .offcanvas .nav-link { color: #ffffff !important; font-size: 1rem; }
        .offcanvas .nav-link:hover{ color: #0af129 !important; font-size: 1rem; font-weight: 500; }
        .offcanvas .btn-close {filter: invert(1);} /* Makes the close button white */
        
        
        /* --- FOOTER STYLING --- */
        .app-footer {
            background-color: rgba(26, 6, 50, 0.602);
            color: #ccc;
            padding: 3rem 1rem;
        }
        .app-footer h3 {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            border-left: 3px solid #0d6efd;
            padding-left: 1rem;
        }
        .app-footer a { color: #ccc; text-decoration: none; }
        .app-footer a:hover { color: #0af129; }
        .app-footer .organization-address { list-style: none; padding: 0; }
        .app-footer .organization-address li { margin-bottom: 0.75rem; }
        
        .copyright-container {
            background-color: #12122d;
            padding: 1rem 0;
            font-size: 0.8rem;
        }
        .copyright-container a { color: #aaa; margin: 0 0.75rem; text-decoration: none; }
        .copyright-container a:hover { color: #fff; }
        .copyright-logos img {
            height: 30px;
            width: auto;
            margin-left: 1rem;
        }

        /* --- Responsive Adjustments --- */
        @media (max-width: 1480px) {
            .carousel-caption {
                bottom: 10rem;
            }
        }
        @media (max-width: 576px) {
            .navbar-brand-logos .eamena-main-logo {
                width: 200px !important;
                height: auto;
            }
            .navbar-brand-logos .marea-logo {
                width: 110px !important;
                height: auto;
            }
        }
        /*
        The hamburger menu's alignment on smaller screens,
        */
        @media (max-width: 1399.98px) {
            
            .navbar > .container-fluid {
                flex-wrap: wrap;
                row-gap: 1rem; 
            }
            .navbar-toggler {
                margin-left: auto;
            }
        }
        
    </style>
</head>
<body>
   <!-- <div id="downtime-alert" class="alert upgrade-alert d-flex justify-content-center align-items-center" role="alert">
        <i class="bi bi-exclamation-triangle-fill flex-shrink-0 me-3" style="font-size: 1.5rem; color:yellow;"></i>
        <div>
            Dear users, Our database will not be available on <b>16th and 17th September 2025</b>, due to some technical arrangements. Thanks for your patience and understanding.
        </div>
    </div>-->

    <div class="site-wrapper">

        <header class="navbar navbar-expand-xxl navbar-dark">
            <div class="container-fluid px-md-4 px-lg-5 d-flex justify-content-between align-items-center">
                
                <div class="navbar-brand-logos">
                    <a href="https://eamena.org/"><img src="{% static 'img/landing/eamena/eamena_logo_nobackground_lg_update_300dpi.png' %}" alt="EAMENA Logo img-fluid" class="eamena-main-logo" style="max-width: 360px; max-height: 57px;"></a>
                    <a href="https://marea.soton.ac.uk/"><img src="{% static 'img/landing/eamena/marea-logo_white.png' %}" alt="MarEA Logo" class="marea-logo img-fluid" style="max-width: 203px; max-height: 72px;"></a>
                </div>

                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="d-none d-xxl-block navbar-nav-right">
                    <div class="nav-top-tier">
                        {% if user.username == 'anonymous' %}
                            <a id="auth-link" href="{% url 'auth' %}?next={% url 'home' %}">{% trans "Sign in" %}</a>
                        {% else %}
                            <a href="{% url 'user_profile_manager' %}" class="me-3">{% trans "Welcome, " %} {{ user.first_name|default:user.username }}</a>
                            <a href="{% url 'auth' %}?next={% url 'home' %}&logout=true">{% trans 'Log off' %}</a>
                        {% endif %}
                    </div>
                    <div class="nav-bottom-tier">
                        <a href="https://eamena.org/database#data-use" target="_blank">{% trans "License and Open Access Policy" %}</a>
                        {% if user.username != 'anonymous' %}
                            <a href="{% url 'search_home' %}" target="_blank">{% trans "Search the EAMENA Database" %}</a>
                        {% else %}
                            <a href="{% url 'signup' %}">{% trans "Public Access" %}</a>
                        {% endif %}

                        {% if user|can_create_resource_instance and user.username != 'anonymous' %}
                            <a href="{% url 'resource' %}" target="_blank">{% trans "Create New Heritage Resources" %}</a>
                        {% else %}
                            <a href="http://eamena.web.ox.ac.uk/database-registration-form/">{% trans "Register for Researcher Access" %}</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </header>

        <main id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Sureza_drone_NE.jpg' %});">
                    <div class="carousel-caption">
                        <h2>{% trans "EAMENA Database v5" %}</h2>
                        <p>{% trans " Endangered Archaeology in" %} {% trans " The Middle East & North Africa" %}</p>
                    </div>
                    <p class="image-attribution">{% trans "Tell Surezha (Kurdistan Regional Government, Iraq) © University of Chicago/Harvard University" %}</p>
                </div>
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Sidon, Lebanon by Crystal Safadi.JPG' %});">
                    <p class="image-attribution">{% trans "Sidon, Lebanon © Crystal el-Safadi" %}</p>
                </div>
               <!-- <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/07-Abbas Abad-2022.jpg' %});">
                    <p class="image-attribution">{% trans "A historic landscape in Abbas Abad, near Taybad, Iran, featuring a caravanserai, castle, field and Qanat systems, and settlements © Google Earth 2022" %}</p>
                </div>-->
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Suakin Island, Sudan by Colin Breen.jpg' %});">
                    <p class="image-attribution">{% trans "Suakin Island, Sudan © Colin Breen" %}</p>
                </div>
                <!--<div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/11-Umm al-Rasas-Jordan.jpg' %});">
                    <p class="image-attribution">{% trans "The World Heritage Site of Umm ar-Rasas, Jordan © Google Earth 2022" %}</p>
                </div>-->
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Fig3_StCath1951a.jpg' %});">
                    <p class="image-attribution">{% trans "St Catherine’s Monastery looking north, Sinai, Egypt, 1951 © John Clubb (683 Squadron RAF)" %}</p>
                </div>
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Libya_Wadi Matkhandouch1_JN.jpg' %});">
                    <p class="image-attribution">{% trans "Rock Art in Wadi Matkhandouch, Libya © Julia Nikolaus" %}</p>
                </div>
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Shibam.jpg' %});">
                    <p class="image-attribution">{% trans "Shibam, Yemen on 2 November, 1929 © Nicholas Salt" %}</p>
                </div>
               <!-- <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/09-Seimare-Dam.png' %});">
                    <p class="image-attribution">{% trans "A submerging archaeological site in the Seimare Dam, Iran © Bing Maps" %}</p>
                </div>-->
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Morocco_Ksar Bounou_NS_Middle_Draa Project.jpg' %});">
                    <p class="image-attribution">{% trans "Qasr Bounou, Morocco © The Middle Draa Project/Nichole Sheldrick" %}</p>
                </div>
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Aswan, EgyptJPG.JPG' %});">
                    <p class="image-attribution">{% trans "Aswan, Egypt © Mohamed Kenawi" %}</p>
                </div>
               <!--<div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/APAAME_20221123_FAB-0154_reduced.jpg' %}); background-size: contain; background-repeat: no-repeat;">
                    <p class="image-attribution">{% trans "A Roman temporary military camp in south east Jordan © APAAME" %}</p>
                </div>-->
               <!-- <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/02-Azlaa_Castle.jpg' %});">
                    <p class="image-attribution">{% trans "Azlaa' Castle (Dezh-e-Azlaa), Isfahan province, Iran © Google Earth 2021" %}</p>
                </div>-->
               <!-- <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/05-Robat-e-Khakestar_2013.jpg' %});">
                    <p class="image-attribution">{% trans "A ruined caravanserai near Robat Khakestar, Iran © Google Earth 2013" %}</p>
                </div>-->
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Lepcis Magna, Libya, by Julia Nikolaus.JPG' %});">
                    <p class="image-attribution">{% trans "Lepcis Magna, Libya © Julia Nikolaus" %}</p>
                </div>
                <div class="carousel-item" data-bs-interval="6000" style="background-image: url({% static 'img/landing/eamena/Petra_AZ_cropped.jpg' %});">
                    <p class="image-attribution">{% trans "A View of Petra, Jordan © Andrea Zerbini" %}</p>
                </div>
            </div>
        </main>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title" id="offcanvasNavbarLabel">{% trans "Menu" %}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                
                {% if user.username == 'anonymous' %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'auth' %}?next={% url 'home' %}">{% trans "Sign in" %}</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'auth' %}?next={% url 'home' %}&logout=true">{% trans 'Log off' %}</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'user_profile_manager' %}">{% trans "Welcome, " %} {{ user.first_name|default:user.username }}</a></li>
                {% endif %}
                
                {% if user.username != 'anonymous' %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'search_home' %}" target="_blank">{% trans "Search the EAMENA Database" %}</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'signup' %}">{% trans "Public Access" %}</a></li>
                {% endif %}

                {% if user|can_create_resource_instance and user.username != 'anonymous' %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'resource' %}" target="_blank">{% trans "Create New Heritage Resources" %}</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="http://eamena.web.ox.ac.uk/database-registration-form/">{% trans "Register for Researcher Access" %}</a></li>
                {% endif %}

                <li class="nav-item mt-3 border-bottom pb-2 mb-2"></li>
                <li class="nav-item policy"><a class="nav-link" href="https://eamena.org/database#data-use" target="_blank">{% trans "License and Open Access Policy" %}</a></li>
            </ul>
        </div>
    </div>

    <footer class="app-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <h3>{% trans "EAMENA Project" %}</h3>
                    <ul class="organization-address">
                        <li><a href="https://www.arch.ox.ac.uk/" target="_blank">{% trans "University of Oxford" %}</a></li>
                        <li><a href="https://le.ac.uk/archaeology/" target="_blank">{% trans "University of Leicester" %}</a></li>
                        <li><a href="https://www.dur.ac.uk/archaeology/" target="_blank">{% trans "Durham University" %}</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <h3>{% trans "MarEA Project" %}</h3>
                    <ul class="organization-address">
                        <li><a href="https://www.southampton.ac.uk/archaeology/index.page" target="_blank">{% trans "University of Southampton" %}</a></li>
                        <li><a href="https://www.ulster.ac.uk/" target="_blank">{% trans "Ulster University" %}</a></li>
                    </ul>
                </div>
                <div class="col-lg-6 col-md-12 mb-4">
                    <h3>{% trans "Supported By:" %}</h3>
                    <ul class="organization-address">
                        <li><a href="https://www.arcadiafund.org.uk/" target="_blank">{% trans "Arcadia" %}</a></li>
                        <li><a href="https://www.britishcouncil.org/arts/culture-development/cultural-protection-fund/" target="_blank">{% trans "British Council Cultural Protection Fund" %}</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    
    <div class="copyright-container">
        <div class="container d-flex justify-content-between align-items-center">
            <div>
                <a href="https://eamena.org/copyright">{% trans "Copyright" %}</a>
                <a href="https://eamena.org/privacy">{% trans "Privacy Policy" %}</a>
            </div>
            <div class="copyright-logos">
                <a href="https://eamena.org/database#data-use"><img src="{% static 'img/landing/eamena/license-cc-by.png' %}" alt="CC-BY License"></a>
                <a href="http://www.archesproject.org" target="_blank"><img src="{% static 'img/PoweredByArches.png' %}" alt="Powered by Arches"></a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for 1 second after the page loads
            setTimeout(function() {
                const alert = document.getElementById('downtime-alert');
                if (alert) {
                    // Add the 'show' class to trigger the CSS transition
                    alert.classList.add('show');
                }
            }, 1000); // 1000 milliseconds = 1 second
        });
    </script>

</body>
</html>
